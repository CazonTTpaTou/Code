SELECT AVG(VAL)
FROM (SELECT MAX(STT_VALEUR) AS VAL
FROM (SELECT TOP(SELECT CASE
WHEN N % 1 = 0 THEN (N /2) + 1
ELSE N / 2
END AS TOPN
FROM (SELECT COUNT(*) AS N
FROM dbo.T_STATISTIQUES_STT) AS T)
STT_VALEUR
FROM dbo.T_STATISTIQUES_STT
ORDER BY STT_VALEUR) AS T1
UNION
SELECT MIN(STT_VALEUR) AS VAL
FROM (SELECT TOP(SELECT CASE
WHEN N % 1 = 0 THEN (N /2) + 1
ELSE N / 2
END AS TOPN
FROM (SELECT COUNT(*) AS N
FROM dbo.T_STATISTIQUES_STT) AS T)
STT_VALEUR
FROM dbo.T_STATISTIQUES_STT
ORDER BY STT_VALEUR DESC) AS T2
) AS T

